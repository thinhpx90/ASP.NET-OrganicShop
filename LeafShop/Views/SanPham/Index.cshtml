
@model PagedList.IPagedList<LeafShop.Models.SanPham>
@using PagedList.Mvc;
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="https://kit.fontawesome.com/e38e0bb8bb.js" crossorigin="anonymous"></script>
<section id="page-title">
    <div class="container clearfix">

        <ol class="breadcrumb col-md-6 col-sm-6">
            <li><a href="/">Trang chủ</a></li>
            <li class='active'>Tất cả sản phẩm</li>
        </ol>
    </div>
</section>
<section id="content">
    <div class="content-wrap">
        <div class="container clearfix">
            <div class='collection_banner'>

            </div>
            <div class='row'>
                <div class="col-xs-12">
                </div>
                <div class="post_content pull-right col-sm-12 col-xs-12 col-md-9"
                     style="margin-bottom: 15px !important;">
                    Tất cả sản phẩm
                    <div id="shop" class="product-3 clearfix">
                        <div class="dess">
                        </div>
                        <div class='sort-wrapper'>
                            <div class="browse-tags"
                                 style='margin-bottom:20px;line-height: 30px;'>
                                <div class="col-sm-6 col-md-7 noleftpadding">
                                    <p class="subtext nobottommargin">
                                        Có <span class='require_symbol'>@ViewBag.totalSP</span> sản phẩm.
                                    </p>
                                </div>
                                <div class='col-sm-6 col-md-5 noleftpadding text-right norightpadding'>
                                    <span class='col-sm-4 col-xs-4 nopadding text-left'>Sắp xếp theo:</span>
                                    <span class="custom-dropdown custom-dropdown--white pull-right col-sm-8 col-xs-8 norightpadding" style="margin-bottom:30px;">
                                        <div class="dropdown">
                                            @if (ViewBag.CurrentSort == null)
                                            {
                                                <button class="dropbtn">Thứ tự</button>
                                            }
                                            else
                                            {
                                                if (ViewBag.CurrentSort == "ten_asc")
                                                {
                                                    <button class="dropbtn">A → Z</button>
                                                }
                                                else if (ViewBag.CurrentSort == "ten_desc")
                                                {
                                                    <button class="dropbtn">Z → A</button>

                                                }
                                                else if (ViewBag.CurrentSort == "gia_asc")
                                                {
                                                    <button class="dropbtn">Giá tăng dần</button>

                                                }
                                                else if (ViewBag.CurrentSort == "gia_desc")
                                                {
                                                    <button class="dropbtn">Giá giảm dần</button>

                                                }
                                                else if (ViewBag.CurrentSort == "ngay_desc")
                                                {
                                                    <button class="dropbtn">Ngày giảm dần</button>

                                                }
                                                else if (ViewBag.CurrentSort == "ngay_dasc")
                                                {
                                                    <button class="dropbtn">Ngày tăng dần</button>

                                                }
                                                else if (ViewBag.CurrentSort == "slb_asc")
                                                {
                                                    <button class="dropbtn">Số lượng bán</button>

                                                }
                                                else if (ViewBag.CurrentSort == "sl_asc")
                                                {
                                                    <button class="dropbtn">Sản phẩm nổi bật</button>
                                                }
                                            }
                                            <ul class="dropdown-content" style="z-index:1000;">
                                                @Html.ActionLink("Sản phẩm nổi bật", "Index", new { sortOrder = ViewBag.SapTheoSoLuong, currentFilter = ViewBag.CurrentFilter })
                                                @Html.ActionLink("Giá: tăng dần", "Index", new { sortOrder = ViewBag.GiaTangDan, currentFilter = ViewBag.CurrentFilter })
                                                @Html.ActionLink("Giá: giảm dần", "Index", new { sortOrder = ViewBag.GiaGiamDan, currentFilter = ViewBag.CurrentFilter })
                                                @Html.ActionLink("Tên: A-Z", "Index", new { sortOrder = ViewBag.SapTheoTenAZ, currentFilter = ViewBag.CurrentFilter })
                                                @Html.ActionLink("Tên: Z-A", "Index", new { sortOrder = ViewBag.SapTheoTenZA, currentFilter = ViewBag.CurrentFilter })
                                                @Html.ActionLink("Cũ Nhất", "Index", new { sortOrder = ViewBag.SapTheoNgaycCuNhat, currentFilter = ViewBag.CurrentFilter })
                                                @Html.ActionLink("Mới nhất", "Index", new { sortOrder = ViewBag.SapTheoNgaycMoiNhat, currentFilter = ViewBag.CurrentFilter })
                                                @Html.ActionLink("Bán chạy nhất", "Index", new { sortOrder = ViewBag.SapTheoSoLuongBan, currentFilter = ViewBag.CurrentFilter })
                                            </ul>
                                        </div>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div id='grid_pagination'>
                            <div style="display:flex;flex-wrap:wrap">
                                @foreach (var product in Model)
                                {
                                    <div class='col-sm-4 col-xs-12 noleftpadding norightpadding product_single'>
                                        <div class="product clearfix">

                                            <div class="haravan-product-reviews-badge" data-id="1003020409">
                                            </div>
                                            <div class="product-image">
                                                <a href="/SanPham/Detail/@product.MaSanPham">
                                                    <img src="@product.HinhMinhHoa"
                                                         alt="@product.TenSanPham">
                                                </a>
                                                <div class="product-overlay">
                                                    
                                                    <a href="#product-pop-up" style="display:inline-flex;justify-content:center;align-items:center;" class="item-quick-view fancybox-fast-view hidden-sm hidden-xs" onclick="loadsp(@product.MaSanPham)" product_url="#" data-toggle='tooltip' title='Xem nhanh'><i class="fa fa-eye"></i><span class='hidden-md hidden-lg'> Xem nhanh</span></a>
                                                </div>
                                            </div>
                                            <div class="product-title">
                                                <h4>
                                                    <a href="/SanPham/Detail/@product.MaSanPham"
                                                       title="@product.TenSanPham">
                                                        @product.TenSanPham
                                                    </a>
                                                </h4>
                                                @*<span>3489940049213</span>*@
                                            </div>
                                            <div class="product-desc">

                                                <div class="product-price">

                                                    <ins> @String.Format("{0:0,0đ}", product.DonGia) </ins>
                                                </div>
                                                <div class="buy_all">
                                                    @if (product.SoLuong == 0)
                                                    {
                                                        <div class="buy_alls">
                                                            <a href="javascript::0">Hết Hàng</a>
                                                        </div>
                                                    }
                                                    @if (product.SoLuong > 0)
                                                    {
                                                        <div class="buy_all">
                                                            <a class="product_quick_add" data-toggle='tooltip' href="#" onclick="AddToCart(@product.MaSanPham,1)">Mua Ngay</a>
                                                        </div>
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }
                            </div>
                            <div class='pagination_wrapper'>

                                Trang @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) / @Model.PageCount
                                @Html.PagedListPager(Model, page => Url.Action("Index", new
                           {
                               page,
                               sortOrder = ViewBag.CurrentSort,
                               currentFilter = ViewBag.CurrentFilter
                           }))
                            </div>
                        </div>
                    </div>
                </div>
                <div class="sidebar nobottommargin  left-sidebar col-sm-12 col-xs-12 col-md-3">
                    <div class="sidebar-widgets-wrap">
                        <div class="left-sidebar">
                            <div class="panel-heading">
                                <a data-toggle="collapse" href="#filter_group">
                                    <h4 class="panel-title">
                                        Danh mục sản phẩm
                                    </h4>
                                </a>
                            </div>

                            <ul class="lv1">
                                @foreach (var dm in @ViewBag.dmSP)
                                {
                                    <li>
                                        <a class="one1" data-href="/SanPham/Category/@dm.MaDanhMuc"
                                           href="javacript:0">
                                            @dm.TenDanhMuc
                                            <i class="fa fa-angle-right right-icon "
                                               aria-hidden="true"></i>
                                        </a>
                                        @if (dm.DanhMuc1.Count > 0)
                                        {
                                            <ul class="lv2">
                                                @foreach (var dmCon in dm.DanhMuc1)
                                                {
                                                    <li>
                                                        <a href="/SanPham/Category/@dmCon.MaDanhMuc" class="one2">
                                                            <i class="fa fa-angle-double-right" aria-hidden="true"></i>
                                                            @dmCon.TenDanhMuc <i class="fa fa-angle-right right-icon"
                                                                                 aria-hidden="true"></i>
                                                        </a>
                                                        @if (dmCon.DanhMuc1.Count > 0)
                                                        {
                                                            <ul class="lv3">
                                                                @foreach (var dmChau in dmCon.DanhMuc1)
                                                                {
                                                                    <li>
                                                                        <a href="/SanPham/Category/@dmChau.MaDanhMuc">
                                                                            <i class="fa fa-angle-double-right"
                                                                               aria-hidden="true"></i> @dmChau.TenDanhMuc
                                                                        </a>
                                                                    </li>
                                                                }


                                                            </ul>
                                                        }

                                                    </li>
                                                }

                                            </ul>
                                        }
                                    </li>


                                }
                            </ul>
                        </div>
                        <style>
                            .right-icon {
                                float: right;
                                padding-right: 10px;
                            }

                            .lv1 {
                                list-style: none;
                                border: 1px solid #ccc;
                                border-top: none;
                            }

                                .lv1 > li {
                                    border-bottom: 1px solid #ccc;
                                }

                                    .lv1 > li > a {
                                        color: #000;
                                        padding: 5px 10px;
                                        width: 100%;
                                        display: block;
                                    }

                            .lv2 {
                                list-style: none;
                                display: none;
                            }

                                .lv2 > li {
                                    border-top: 1px solid #ccc;
                                }

                                .lv2 li > a {
                                    font-size: 12px;
                                    color: #000;
                                    width: 100%;
                                    padding: 3px 20px;
                                    display: block;
                                }

                                .lv2 li:last-child,
                                .lv1 > li:last-child,
                                .lv3 li:last-child {
                                    border-bottom: none;
                                }

                            .lv3 {
                                display: none;
                            }

                                .lv3 > li {
                                    border-top: 1px solid #ccc;
                                    list-style: none;
                                }

                                .lv3 li > a {
                                    font-size: 12px;
                                    color: #000;
                                    width: 100%;
                                    padding: 3px 0px;
                                    padding-left: 30px;
                                    display: block;
                                }
                        </style>
                        <script>
                            $(document).ready(function () {
                                $('.one1').click(function () {
                                    if ($(this).next('.lv2').css('display') == ('none')) {
                                        $('.lv2').hide();
                                        $(this).next('.lv2').show();
                                    } else {
                                        $(this).next('.lv2').hide();
                                    }
                                });
                            });


                            $(document).ready(function () {
                                $('.one2').click(function () {
                                    if ($(this).next('.lv3').css('display') == ('none')) {
                                        $('.lv3').hide();
                                        $(this).next('.lv3').show();
                                    } else {
                                        $(this).next('.lv3').hide();
                                    }
                                });
                            });
                            $(document).ready(function () {
                                $("ul.lv2 > li a").each(function (item) {
                                    if (window.location.pathname === $(this).attr("href")) {
                                        $(this).closest('ul.lv2 > li').addClass("active");
                                        $(this).closest('lul.lv1').addClass("active");
                                        $(this).closest('ul.lv2').show();
                                    }
                                });
                                $("ul.lv1 > li > a").each(function (item) {
                                    if (window.location.pathname === $(this).attr("data-href")) {
                                        $(this).closest('ul.lv1 > li > a').addClass("active");
                                    }
                                });
                            });

                        </script>
                       
                    


                   
               
                        <div class='hidden-xs hidden-sm'>
                            <div class="widget clearfix">
                                <h4><a href='cham-soc-da-mat.html'>Sản phẩm nổi bật</a></h4>
                                <div id="Popular-item" class='sidebar_menu'>
                                    @foreach (var spNoiBat in @ViewBag.spNoiBat)
                                    {
                                        <div class="spost clearfix">
                                            <div class="entry-image">
                                                <a href="/SanPham/Detail/@spNoiBat.MaSanPham">
                                                    <img src="@spNoiBat.HinhMinhHoa"
                                                         alt="Dầu tầm xuân hữu cơ Gravier 50ml">
                                                </a>
                                            </div>
                                            <div class="entry-c">
                                                <div class="entry-title">
                                                    <h4>
                                                        <a href="cham-soc-da-mat/products/dau-tam-xuan-huu-co-gravier-50ml.html">
                                                            @spNoiBat.TenSanPham
                                                        </a>
                                                    </h4>
                                                </div>
                                                <ul class="entry-meta">
                                                    <li class="color">
                                                        <ins>@String.Format("{0:0,0đ}", spNoiBat.DonGia)</ins>

                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    }
                                </div>
                            </div>
                            <div class="widget clearfix">
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </div>
    </div>
</section>